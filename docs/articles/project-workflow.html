<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Project Workflow • glamr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Project Workflow">
<meta property="og:description" content="Basics of starting a project
">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">glamr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/credential-management.html">Credential Management</a>
    </li>
    <li>
      <a href="../articles/project-workflow.html">Project Workflow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USAID-OHA-SI/glamr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Project Workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USAID-OHA-SI/glamr/blob/HEAD/vignettes/project-workflow.Rmd" class="external-link"><code>vignettes/project-workflow.Rmd</code></a></small>
      <div class="hidden name"><code>project-workflow.Rmd</code></div>

    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>This vignette provides best practices for project workflow at USAID/Office of HIV/AIDS, making it easier to get you going and to align exceptions across the team.</p>
</div>
<div class="section level3">
<h3 id="initiate-project">Initiate Project<a class="anchor" aria-label="anchor" href="#initiate-project"></a>
</h3>
<p>The first thing we want to do when starting up new work is determining if it fits into an existing bucket or this is completely new. All of our R work exists on GitHub to make our work transparent, improve collaboration, and makee it easy access. You find our repositories for different projects and package under our <a href="https://github.com/USAID-OHA-SI/" class="external-link">GitHub organization, USAID-OHA-SI</a>. If the work exists, you can clone the repo (make a local copy) and start working from there. If however its new work, you’ll want to start up a new project and repo. We work with <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects" class="external-link">RStudio Projects</a> and git/GitHub</p>
<blockquote>
<p>RStudio projects make it straightforward to divide your work into multiple contexts, each with their own working directory, workspace, history, and source documents.</p>
</blockquote>
<p>To create a RStudio project, you can navigate there from <code>File &gt; New Project</code> or establish through <code>usethis</code></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org" class="external-link">usethis</a></span><span class="op">)</span>

<span class="fu"><a href="https://usethis.r-lib.org/reference/create_package.html" class="external-link">create_project</a></span><span class="op">(</span><span class="st">"~/Documents/project-transform"</span><span class="op">)</span></code></pre></div>
<p>This will get you set you up in RStudio with a self contained project. In order to collaborate we also use git and GitHub. For more on integrating git with RStudio, check out Jenny Bryan’s <a href="https://happygitwithr.com/" class="external-link">Happy Git and GitHub for the useR</a>. You an also use a UI tool like GitHub Desktop or GitKraken. If you have git installed and integreated with R, you can again use <code>usethis</code> to set everything up. And <code>usethis</code> even has some <a href="https://usethis.r-lib.org/articles/articles/usethis-setup.html#configure-user-name-and-user-email" class="external-link">help info on getting started with git</a> if this your first time.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://usethis.r-lib.org/reference/use_git.html" class="external-link">use_git</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#this prompts a restart of your session</span>
<span class="fu"><a href="https://usethis.r-lib.org/reference/use_github.html" class="external-link">use_github</a></span><span class="op">(</span>organisation <span class="op">=</span> <span class="st">"USAID-OHA-SI"</span><span class="op">)</span></code></pre></div>
<p>The last thing we’ll use <code>usethis</code> for is to set up a license for the project. We use the MIT license which calls for attribution for downstream uses of your work and specifies that the software is provided as is.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/licenses.html" class="external-link">use_mit_license</a></span><span class="op">(</span><span class="st">"Dr. Raj Shah"</span><span class="op">)</span> <span class="co">#add your name</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="si-workflow-enter-glamr">SI Workflow, Enter glamr<a class="anchor" aria-label="anchor" href="#si-workflow-enter-glamr"></a>
</h3>
<p>Okay, so we go through the basics of setting up a project, now let’s turn to some workflow specifics that <code>glamr</code> is going to help us with.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/glamr" class="external-link">glamr</a></span><span class="op">)</span>
<span class="co">#&gt; Warning: [glamr] status: UNKNOWN - unable to identify status (via sha code) for</span>
<span class="co">#&gt; package built locally</span></code></pre></div>
<p>The primary function we’re going to run to get us going is <code>si_setup</code>. If we look under the hood at <code>si_setup</code>, we can see it actually contains three sub-function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">si_setup</span>
<span class="co">#&gt; function () </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     folder_setup()</span>
<span class="co">#&gt;     setup_gitignore()</span>
<span class="co">#&gt;     setup_readme()</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x000000002416f118&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:glamr&gt;</span></code></pre></div>
<p>The first one, <code><a href="../reference/folder_setup.html">folder_setup()</a></code> initiates the main folders we use for our work:</p>
<ul>
<li>Data - where any raw/input data (<strong>xlsx/csv/rds</strong>) specific to the project are stored</li>
<li>Dataout - where any intermediary or final data (<strong>xlsx/csv/rds</strong>) are output as a product of your code</li>
<li>Scripts - where all the code (<strong>R/py</strong>) are stored (if there is a local order, make sure to add prefixes to each script, e.g. 00_init.R, 01_data-access.R, 02_data-munging.R, …)</li>
<li>Images - any <strong>png/jpeg</strong> visual outputs from your code</li>
<li>Graphics - any <strong>svg/pdf</strong> visual outputs that will be edited in vector graphics editor, eg Adobe Illustrator or Inkscape</li>
<li>AI - any <strong>ai</strong> files or other files from a graphics editor (exported pngs products will be stored in Images)</li>
<li>GIS - any <strong>shp</strong> files or other GIS releated inputs</li>
<li>Documents - any <strong>docx/xlsx/pptx/pdf</strong> documents that relate to the process or are final outputs</li>
<li>markdown - exported <strong>md</strong> files from a knitr report</li>
</ul>
<p>If you clone from GitHub not all the folders may exist there, so we recommend running <code><a href="../reference/folder_setup.html">folder_setup()</a></code> on its own to establish the same organization on your local machine. The reason we have created this into a function is to ensure uniformity across our projects and know what to expect when we pick up someone else’s work (or our own work from the distant past).</p>
<p>The next function that is run is <code><a href="../reference/setup_gitignore.html">setup_gitignore()</a></code>, which creates a <code>.gitignore</code> file in your project. The primary purpose of this file is to ensure that our data and outputs are not being published to the web. By default after running <code><a href="../reference/si_setup.html">si_setup()</a></code> most data formats/folders will be kept from being published. Below is what the <code>.gitignore</code> file will look like.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#R basics</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  .Rproj.user</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  .Rhistory</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  .RData</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  .Ruserdata</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#no data</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.csv</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.txt</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.rds</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.xlsx</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.xls</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.zip</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.png</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.twbx</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="sc">*</span>.pptx</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#nothing from these folders</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  AI<span class="sc">/</span><span class="er">*</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  GIS<span class="sc">/</span><span class="er">*</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  Images<span class="sc">/</span><span class="er">*</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  Graphics<span class="sc">/</span><span class="er">*</span></span></code></pre></div>
<p>And the last component from <code><a href="../reference/si_setup.html">si_setup()</a></code> is to add a standard USAID disclaimer to your project’s <code>README.md</code> file (and creates this file if its missing).</p>
<p>From a project standpoint, now you’re good to go.</p>
</div>
<div class="section level3">
<h3 id="accessing-data">Accessing Data<a class="anchor" aria-label="anchor" href="#accessing-data"></a>
</h3>
<p>For the most part, our SI work revolves around using the MER Structured Datasets, which are large, cumbersome files. A best practice when working on projects is to store the data you use within that project so its all self-contained. However, since most of our work revolve around a couple of massive datasets (OUxIM, PSNU, PSNUxIM, NAT_SUBNAT, FSD), it makes more sense for us to store these dataset in a central location on our machines rather than in each project.</p>
<p>The problem now is that where I store my MSD files is going to be different than the path to yours. To solve this dilemma, we use a function called <code>si_paths()</code> which access the paths we have stored locally to where our MSDs or Downloads are for instance. This way, when you pick up a coworkers code, you don’t have to change any of the file paths, it just works.</p>
<p>Those local paths will be set once and stored in your <code>.Rprofile</code>. To do so, you will run <code>set_paths</code> to store all the relevant paths (you can ignore any that aren’t relevant to you).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/set_paths.html">set_paths</a></span><span class="op">(</span>folderpath_msd <span class="op">=</span> <span class="st">"~/Documents/Data"</span>,
  folderpath_datim <span class="op">=</span>  <span class="st">"~/Documents/DATIM"</span>,
  folderpath_downloads <span class="op">=</span>  <span class="st">"~/Downloads"</span><span class="op">)</span></code></pre></div>
<p>Running this will open your <code>.Rprofile</code> and you’ll be prompted to paste the pre-copied code into the <code>.Rprofile</code> save and restart your session.</p>
<p>With that stored, you can use <code><a href="../reference/si_path.html">si_path()</a></code> to return the path to your MSD folder (as the default) and then use another <code>glamr</code> function, <code><a href="../reference/return_latest.html">return_latest()</a></code>, which looks in the provide folder path for the lastest version of a file that matches the pattern you provided. In this case, we can pass in that we want the last OUxIM MSD and it will return the file path which we can pass into <code><a href="https://readr.tidyverse.org/reference/read_rds.html" class="external-link">readr::read_rds()</a></code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/si_path.html">si_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/return_latest.html">return_latest</a></span><span class="op">(</span><span class="st">"OU_IM_FY19"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html" class="external-link">read_rds</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Aaron Chafetz, Tim Essam, Baboyma Kagniniwa, Benjamin Kasdan.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
